<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Parser</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.18/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #111827; /* Dark background */
        }
        .glass-card {
            background: rgba(31, 41, 55, 0.5); /* Semi-transparent dark gray */
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .progress-ring__circle {
            transition: stroke-dashoffset 0.5s ease-in-out;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid #FFF;
            border-bottom-color: #14B8A6; /* Teal */
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        #error-box {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #EF4444;
            color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            z-index: 100;
        }
        .copy-icon {
            cursor: pointer;
            transition: color 0.2s ease-in-out;
        }
        .copy-icon:hover {
            color: #14B8A6; /* Teal */
        }
        /* Custom scrollbar for a better dark mode experience */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
    </style>
</head>
<body class="text-gray-200">
    <div id="error-box"></div>
    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-white">AI Resume Parser</h1>
            <p class="text-gray-400 mt-3 text-lg">Instantly transform resumes into structured, actionable data.</p>
        </header>

        <main>
            <div class="glass-card p-6 rounded-2xl shadow-2xl">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- File Upload Section -->
                    <div>
                        <label for="resume-file" class="block text-sm font-medium text-gray-300 mb-2">1. Upload Resume</label>
                        <div id="drop-zone" class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600 border-dashed rounded-md transition-colors duration-300">
                            <div class="space-y-1 text-center">
                                <svg class="mx-auto h-12 w-12 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                                </svg>
                                <div class="flex text-sm text-gray-400">
                                    <label for="resume-file" class="relative cursor-pointer bg-gray-800 rounded-md font-medium text-teal-400 hover:text-teal-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-800 focus-within:ring-teal-500 px-2">
                                        <span>Upload a file</span>
                                        <input id="resume-file" name="resume-file" type="file" class="sr-only" accept=".pdf,.docx">
                                    </label>
                                    <p class="pl-1">or drag and drop</p>
                                </div>
                                <p class="text-xs text-gray-500" id="file-name">PDF or DOCX</p>
                            </div>
                        </div>
                    </div>

                    <!-- Job Description Section -->
                    <div>
                        <label for="job-description" class="block text-sm font-medium text-gray-300 mb-2">2. Job Description (Optional)</label>
                        <textarea id="job-description" rows="7" class="shadow-sm focus:ring-teal-500 focus:border-teal-500 block w-full sm:text-sm border border-gray-600 rounded-md p-2 bg-gray-900 text-gray-200 placeholder-gray-500" placeholder="Paste job description here for a match score..."></textarea>
                    </div>
                </div>

                <div class="mt-8 text-center">
                    <button id="parse-btn" class="w-full md:w-auto inline-flex justify-center items-center px-8 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-teal-500 disabled:bg-gray-500 transition-transform transform hover:scale-105">
                        Parse Resume
                    </button>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results" class="mt-12">
                <div id="loader" class="text-center hidden p-8">
                    <div class="loader mx-auto"></div>
                    <p class="mt-4 text-gray-400">AI is analyzing the resume...</p>
                </div>
                <div id="output" class="hidden"></div>
            </div>
        </main>
    </div>

    <script>
        // Set up PDF.js worker
        if (window.pdfjsLib) {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js';
        }

        const fileInput = document.getElementById('resume-file');
        const jobDescInput = document.getElementById('job-description');
        const parseBtn = document.getElementById('parse-btn');
        const fileNameDisplay = document.getElementById('file-name');
        const loader = document.getElementById('loader');
        const outputContainer = document.getElementById('output');
        const errorBox = document.getElementById('error-box');
        const dropZone = document.getElementById('drop-zone');

        let resumeText = '';
        let parsedResumeData = null; // To store the parsed data for export

        // Drag and Drop functionality
        dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('border-teal-400'); });
        dropZone.addEventListener('dragleave', () => { dropZone.classList.remove('border-teal-400'); });
        dropZone.addEventListener('drop', (e) => { e.preventDefault(); dropZone.classList.remove('border-teal-400'); const files = e.dataTransfer.files; if (files.length) { fileInput.files = files; handleFile(files[0]); } });

        fileInput.addEventListener('change', (event) => { handleFile(event.target.files[0]); });
        
        async function handleFile(file) {
            if (!file) return;
            fileNameDisplay.textContent = file.name;
            outputContainer.innerHTML = '';
            outputContainer.classList.add('hidden');
            resumeText = '';
            parsedResumeData = null;

            try {
                if (file.type === 'application/pdf') {
                    resumeText = await extractTextFromPdf(file);
                } else if (file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {
                    resumeText = await extractTextFromDocx(file);
                } else {
                    showError('Unsupported file type. Please upload a PDF or DOCX.');
                    fileNameDisplay.textContent = 'PDF or DOCX';
                    return;
                }
            } catch (error) {
                console.error("Error extracting text:", error);
                showError("Failed to read text from the file.");
                fileNameDisplay.textContent = 'PDF or DOCX';
            }
        }

        parseBtn.addEventListener('click', async () => {
            if (!resumeText) {
                showError('Please upload a resume file first.');
                return;
            }
            loader.classList.remove('hidden');
            outputContainer.innerHTML = '';
            outputContainer.classList.add('hidden');
            parseBtn.disabled = true;

            try {
                await callGeminiAPI(resumeText, jobDescInput.value);
            } catch (error) {
                console.error("API call failed:", error);
                showError("An error occurred while parsing the resume.");
            } finally {
                loader.classList.add('hidden');
                parseBtn.disabled = false;
            }
        });

        async function extractTextFromPdf(file) { return new Promise((resolve, reject) => { const reader = new FileReader(); reader.onload = async (event) => { try { const pdf = await pdfjsLib.getDocument({ data: event.target.result }).promise; let textContent = ''; for (let i = 1; i <= pdf.numPages; i++) { const page = await pdf.getPage(i); const text = await page.getTextContent(); textContent += text.items.map(s => s.str).join(' '); } resolve(textContent); } catch (error) { reject(error); } }; reader.onerror = reject; reader.readAsArrayBuffer(file); }); }
        async function extractTextFromDocx(file) { return new Promise((resolve, reject) => { const reader = new FileReader(); reader.onload = (event) => { mammoth.extractRawText({ arrayBuffer: event.target.result }).then(result => resolve(result.value)).catch(reject); }; reader.onerror = reject; reader.readAsArrayBuffer(file); }); }

        // UPDATED SECURE FUNCTION
        async function callGeminiAPI(text, jobDescription) {
            // This is the new URL for our secure Netlify Function
            const functionUrl = '/.netlify/functions/gemini'; 

            let prompt = `You are an expert hiring assistant. First, analyze the following resume text and extract the information into a structured JSON format. Do not invent any information. If a field is not present, use "N/A".\n\nResume Text:\n---\n${text}\n---`;
            
            if (jobDescription) {
                prompt += `\n\nSecond, analyze the resume against this job description. Provide a match score from 0 to 100 and a brief justification.\n\nJob Description:\n---\n${jobDescription}\n---`;
                prompt += `\n\nFinally, based on the candidate's skills and the job description, generate 5-7 relevant interview questions. For each question, provide a concise sample answer or key talking points based on the candidate's resume. Classify each question as either 'Technical' or 'Behavioral'.`;
            }

            const payload = {
                prompt: prompt
            };

            const response = await fetch(functionUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                throw new Error(`Function request failed with status ${response.status}`);
            }

            const result = await response.json();
            if (result.candidates && result.candidates.length > 0) {
                const jsonText = result.candidates[0].content.parts[0].text;
                parsedResumeData = JSON.parse(jsonText); // Store the data
                displayResults(parsedResumeData);
            } else {
                throw new Error("No content received from API via function.");
            }
        }


        function displayResults(data) {
            let jobMatchHTML = '';
            if (data.jobMatch && data.jobMatch.score !== undefined) {
                const score = data.jobMatch.score;
                const radius = 50;
                const circumference = 2 * Math.PI * radius;
                const offset = circumference - (score / 100) * circumference;

                jobMatchHTML = `
                    <div class="glass-card p-6 rounded-2xl flex flex-col md:flex-row items-center gap-6 mb-8">
                        <div class="relative flex-shrink-0">
                            <svg class="w-32 h-32" viewBox="0 0 120 120">
                                <circle class="text-gray-700" stroke-width="8" stroke="currentColor" fill="transparent" r="${radius}" cx="60" cy="60"/>
                                <circle class="progress-ring__circle text-teal-400" stroke-width="8" stroke-dasharray="${circumference}" stroke-dashoffset="${offset}" stroke="currentColor" fill="transparent" r="${radius}" cx="60" cy="60"/>
                            </svg>
                            <span class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-2xl font-bold text-white">${score}<span class="text-sm">%</span></span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-white mb-2">Job Match Analysis</h2>
                            <p class="text-gray-300">${data.jobMatch.justification || ''}</p>
                        </div>
                    </div>
                `;
            }

            let tabsHTML = `
                <div class="flex items-center justify-between border-b border-gray-700 mb-6">
                    <div class="flex flex-wrap">
                        <button class="tab-btn active text-teal-400 border-b-2 border-teal-400 py-2 px-4" onclick="openTab(event, 'summary')">Summary</button>
                        <button class="tab-btn text-gray-400 py-2 px-4" onclick="openTab(event, 'contact')">Contact</button>
                        <button class="tab-btn text-gray-400 py-2 px-4" onclick="openTab(event, 'experience')">Experience</button>
                        <button class="tab-btn text-gray-400 py-2 px-4" onclick="openTab(event, 'education')">Education</button>
                        <button class="tab-btn text-gray-400 py-2 px-4" onclick="openTab(event, 'skills')">Skills</button>
                        ${data.interviewQuestions && data.interviewQuestions.length > 0 ? `<button class="tab-btn text-gray-400 py-2 px-4" onclick="openTab(event, 'questions')">Questions</button>` : ''}
                    </div>
                    <button id="export-btn" class="flex-shrink-0 flex items-center gap-2 text-sm bg-gray-700 hover:bg-gray-600 text-teal-300 font-medium py-2 px-4 rounded-md transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                        Export PDF
                    </button>
                </div>
            `;

            let tabContentHTML = '';
            const email = data.contactInfo?.email || 'N/A';
            const phone = data.contactInfo?.phone || 'N/A';

            // Contact Tab
            tabContentHTML += `<div id="contact" class="tab-content hidden">${data.contactInfo ? `
                <p class="flex items-center gap-2 mb-2"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg> <strong>Name:</strong> ${data.contactInfo.name || 'N/A'}</p>
                <div class="flex items-center justify-between mb-2"> <p class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg> <strong>Email:</strong> ${email}</p> ${email !== 'N/A' ? `<span class="copy-icon text-gray-500" onclick="copyToClipboard('${email}', this)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></span>` : ''} </div>
                <div class="flex items-center justify-between mb-2"> <p class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg> <strong>Phone:</strong> ${phone}</p> ${phone !== 'N/A' ? `<span class="copy-icon text-gray-500" onclick="copyToClipboard('${phone}', this)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></span>` : ''} </div>
            ` : '<p>No contact info found.</p>'}</div>`;

            // Other tabs...
            tabContentHTML += `<div id="summary" class="tab-content">${data.summary ? `<p>${data.summary}</p>` : '<p>No summary found.</p>'}</div>`;
            tabContentHTML += `<div id="experience" class="tab-content hidden">${data.workExperience && data.workExperience.length > 0 ? data.workExperience.map(exp => `<div class="relative pl-8 pb-8 border-l-2 border-gray-700"><div class="absolute -left-2.5 top-1 h-5 w-5 bg-teal-500 rounded-full"></div><h3 class="font-semibold text-lg text-white">${exp.jobTitle || ''}</h3><p class="text-md text-gray-400">${exp.company || ''} - ${exp.location || ''}</p><p class="text-sm text-gray-500">${exp.dates || ''}</p><p class="mt-2 text-gray-300">${exp.description || ''}</p></div>`).join('') : '<p>No work experience found.</p>'}</div>`;
            tabContentHTML += `<div id="education" class="tab-content hidden">${data.education && data.education.length > 0 ? data.education.map(edu => `<div class="mb-4"><h3 class="font-semibold text-white">${edu.degree || ''}</h3><p class="text-gray-400">${edu.institution || ''}, ${edu.location || ''}</p><p class="text-sm text-gray-500">Graduated: ${edu.graduationDate || ''}</p></div>`).join('') : '<p>No education details found.</p>'}</div>`;
            tabContentHTML += `<div id="skills" class="tab-content hidden">${data.skills && data.skills.length > 0 ? `<div class="flex flex-wrap gap-2">${data.skills.map(skill => `<span class="bg-gray-700 text-teal-300 text-sm font-medium mr-2 px-3 py-1 rounded-full">${skill}</span>`).join('')}</div>` : '<p>No skills found.</p>'}</div>`;
            
            // Interview Questions Tab
            if(data.interviewQuestions && data.interviewQuestions.length > 0) {
                tabContentHTML += `<div id="questions" class="tab-content hidden space-y-4">${data.interviewQuestions.map(q => `
                    <details class="bg-gray-800 rounded-lg p-4 transition-all duration-300">
                        <summary class="font-semibold text-white cursor-pointer flex justify-between items-center">
                            <span>${q.question}</span>
                            <span class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full ${q.type === 'Technical' ? 'text-cyan-800 bg-cyan-200' : 'text-amber-800 bg-amber-200'} flex-shrink-0 ml-4">
                                ${q.type}
                            </span>
                        </summary>
                        <div class="mt-3 text-gray-400 border-t border-gray-700 pt-3">
                            <p class="font-semibold text-gray-300">Sample Answer / Talking Points:</p>
                            <p>${q.answer || 'N/A'}</p>
                        </div>
                    </details>
                `).join('')}</div>`;
            }


            outputContainer.innerHTML = `
                ${jobMatchHTML}
                <div class="glass-card p-6 rounded-2xl">
                    ${tabsHTML}
                    ${tabContentHTML}
                </div>
            `;
            outputContainer.classList.remove('hidden');

            // Add event listener for the export button
            document.getElementById('export-btn').addEventListener('click', exportDataToPdf);
        }

        function openTab(event, tabName) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.classList.remove('active', 'text-teal-400', 'border-b-2', 'border-teal-400');
                b.classList.add('text-gray-400');
            });
            document.getElementById(tabName).classList.remove('hidden');
            event.currentTarget.classList.add('active', 'text-teal-400', 'border-b-2', 'border-teal-400');
            event.currentTarget.classList.remove('text-gray-400');
        }

        function exportDataToPdf() {
            if (!parsedResumeData) {
                showError("No data to export.");
                return;
            }

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const data = parsedResumeData;
            
            let y = 15;
            const margin = 10;
            const maxWidth = doc.internal.pageSize.getWidth() - margin * 2;

            const addText = (text, options = {}) => {
                const { size = 10, style = 'normal', isTitle = false, spaceAfter = 5 } = options;
                doc.setFontSize(size);
                doc.setFont('helvetica', style);
                
                const lines = doc.splitTextToSize(text, maxWidth);
                
                if (y + (lines.length * (size / 2.5)) > doc.internal.pageSize.getHeight() - margin) {
                    doc.addPage();
                    y = 15;
                }
                
                doc.text(lines, margin, y);
                y += (lines.length * (size / 2.5)) + (isTitle ? 2 : 0) + spaceAfter;
            };

            addText(`Resume Analysis: ${data.contactInfo?.name || 'N/A'}`, { size: 18, style: 'bold', isTitle: true });

            if (data.jobMatch?.score !== undefined) {
                addText('Job Match Analysis', { size: 14, style: 'bold', isTitle: true });
                addText(`Score: ${data.jobMatch.score}/100`);
                addText(`Justification: ${data.jobMatch.justification}`);
            }

            addText('Summary', { size: 14, style: 'bold', isTitle: true });
            addText(data.summary || 'N/A');

            addText('Contact Information', { size: 14, style: 'bold', isTitle: true });
            addText(`Email: ${data.contactInfo?.email || 'N/A'}`);
            addText(`Phone: ${data.contactInfo?.phone || 'N/A'}`);
            addText(`LinkedIn: ${data.contactInfo?.linkedin || 'N/A'}`);

            addText('Skills', { size: 14, style: 'bold', isTitle: true });
            addText(data.skills?.join(', ') || 'N/A');

            addText('Work Experience', { size: 14, style: 'bold', isTitle: true });
            data.workExperience?.forEach(exp => {
                addText(`${exp.jobTitle} at ${exp.company}`, { style: 'bold', spaceAfter: 2 });
                addText(`${exp.dates} | ${exp.location}`, { size: 9, spaceAfter: 2 });
                addText(exp.description);
            });

            addText('Education', { size: 14, style: 'bold', isTitle: true });
            data.education?.forEach(edu => {
                addText(`${edu.degree} from ${edu.institution}`, { style: 'bold', spaceAfter: 2 });
                addText(`Graduated: ${edu.graduationDate}`);
            });

            if (data.interviewQuestions && data.interviewQuestions.length > 0) {
                 if (y > 100) { // Add a page break if content is already long
                    doc.addPage();
                    y = 15;
                }
                addText('Suggested Interview Questions', { size: 14, style: 'bold', isTitle: true });
                data.interviewQuestions.forEach(q => {
                    addText(`(${q.type}) ${q.question}`, { style: 'bold', spaceAfter: 2 });
                    addText(`Sample Answer: ${q.answer}`);
                });
            }

            doc.save(`${(data.contactInfo?.name || 'resume').replace(' ','_')}_analysis.pdf`);
        }

        function copyToClipboard(text, element) {
            const tempInput = document.createElement('input');
            tempInput.value = text;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);

            // Visual feedback
            const originalIcon = element.innerHTML;
            element.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-teal-400"><polyline points="20 6 9 17 4 12"></polyline></svg>`;
            setTimeout(() => {
                element.innerHTML = originalIcon;
            }, 1500);
        }

        function showError(message) {
            errorBox.textContent = message;
            errorBox.style.display = 'block';
            setTimeout(() => { errorBox.style.display = 'none'; }, 4000);
        }
    </script>
</body>
</html>
